### Definition

CTEs or Common Table Expressions are SQL queries you define inside a query and use as a temporary result. They help break down large complex queries into easier to read, more manageable ones.

You define a single CTE using the `WITH` keyword like this:
```
WITH <cte_name> AS (
	SELECT col1, col2
	FROM table_name
)
SELECT *
FROM <cte_name>
```

You can define multiple CTEs again using `WITH` keyword like this:
```
WITH <cte1_name> AS (
	SELECT col1
	FROM table1_name
), 
<cte2_name> AS (
	SELECT col1
	FROM table2_name
)
SELECT *
FROM <cte1_name> AS cte1
JOIN <cte2_name> AS cte2 ON cte1.col1 = cte2.col1
```
You can put anything inside the CTE. You can pre-filter data, pre-aggregate and even pre-calculate but my recommendation is that you keep CTEs simple and single function.

Let's take a look at a simple example from the Stackoverflow dataset. Let's say we wanted to figure out how many different types of edits a certain post has received.

Table `post_history` looks like this:
```
id
creation_date
post_id
post_history_type_id
revision_guid
user_id
text
comment
```

There's a `post_history_type_id` column and we can see the definition for that in their public schema